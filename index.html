<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Rewind Theater</title>
		
		<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
		<link rel="icon" type="image/png" href="images/favicon128.png" />
		<meta name="theme-color" content="#2a4060" />
		<link rel="manifest" href="manifest.webapp" />
		
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<script type="text/javascript" src="video.js"></script>
		<script type="text/javascript" src="annotate.js"></script>
		<script type="text/javascript" src="info.js"></script>
		<script type="text/javascript" src="keyboard.js"></script>
		
		<script type="text/javascript">
			if (!!navigator.serviceWorker && !!window.Cache && !!Cache.prototype.addAll) {
				navigator.serviceWorker.register('/service_worker.js').then(function () {
					console.log('Service worker registered.');
				}).catch(function () {
					console.log('Service worker failed to register.');
				});
			} else {
				console.log('Service worker caching not supported.');
			}
		</script>
	</head>
	<body>
		<video id="vid"></video>
		<div id="canvas" touch-action="none"></div>
		<div id="toolbar">
			<div>
				<input type="file" accept="video/*" id="vid-upload" />
				<button id="upload-btn" title="Open video">
					<img src="images/icons/open.svg" alt="Open video" />
				</button>
			</div>
			<div>
				<input type="color" id="color-picker" />
				<button id="color-picker-btn" title="Color">
					<svg role="img">
						<use xlink:href="images/icons/palette.svg#icon" href="images/icons/palette.svg#icon"></use>
					</svg>
				</button>
				<button id="rect-btn" title="Rectangle tool (R)">
					<img src="images/icons/rect.svg" alt="Rectangle" />
				</button>
				<button id="ellipse-btn" title="Oval tool (E or O)">
					<img src="images/icons/circle.svg" alt="Oval" />
				</button>
				<button id="clear-btn" title="Clear all (C or Esc)">
					<img src="images/icons/clear.svg" alt="Clear all" />
				</button>
			</div>
			<div>
				<button id="rew-btn" title="Hold to rewind (J or &larr;)">
					<img src="images/icons/rewind.svg" alt="Rewind" />
				</button>
				<button id="play-pause-btn" title="Play/Pause (K or Space)">
					<img src="images/icons/play.svg" alt="Play" id="play-icon" />
					<img src="images/icons/pause.svg" alt="Pause" id="pause-icon" style="display: none;" />
				</button>
				<button id="fwd-btn" title="Hold to fast forward (L or &rarr;)">
					<img src="images/icons/fast_forward.svg" alt="Fast forward" />
				</button>
			</div>
			<div>
				<button id="info-btn" title="About">
					<img src="images/icons/info.svg" alt="About" />
				</button><!--
				--><button id="hide-toolbar-btn" title="Hide toolbar (T to show/hide)">
					<img src="images/icons/caret_down.svg" alt="Hide toolbar" style="transform: rotateZ(180deg);" />
				</button>
			</div>
		</div>
		<section id="info-sheet" class="hidden">
			<h1>Rewind Theater</h1>
			<ul style="list-style-type: none; padding: 0;">
				<li>
					Open a video from your computer to start
					(<img src="images/icons/open.svg" alt="Open video icon" />).
				</li>
				<li>
					Click and drag on the video to draw a rectangle
					(<img src="images/icons/rect.svg" alt="Rectangle icon" />)
					or oval
					(<img src="images/icons/circle.svg" alt="Oval icon" />)
					on the video.
				</li>
				<li>
					Select the
					<img src="images/icons/clear.svg" alt="Clear button" />
					button to clear everything drawn.
				</li>
				<li>
					Press <kbd>T</kbd> to toggle the toolbar.  Hover over toolbar buttons to see other keyboard shortcuts.
				</li>
			</ul>
			<p>
				Video files are not modified and your annotations are not saved after you close Rewind Theater.
			</p>
			<p style="font-size: smaller;">
				Developed by <a href="https://zmyaro.com" target="_blank">Zachary Yaro</a>.
				<br />
				If you like this app, please consider <a href="https://ko-fi.com/zmyaro" target="_blank">buying me a cuppa</a>.
			</p>
		</section>
	</body>
</html>
