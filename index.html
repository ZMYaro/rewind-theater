<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Rewind Theater</title>
		
		<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
		<link rel="icon" type="image/png" href="images/favicon128.png" />
		<meta name="theme-color" content="#2a4060" />
		<link rel="manifest" href="manifest.webapp" />
		
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<script type="text/javascript" src="video.js"></script>
		<script type="text/javascript" src="annotate.js"></script>
		<script type="text/javascript" src="info.js"></script>
		<script type="text/javascript" src="keyboard.js"></script>
		
		<script type="text/javascript">
			if (!!navigator.serviceWorker && !!window.Cache && !!Cache.prototype.addAll) {
				navigator.serviceWorker.register('/service_worker.js').then(function () {
					console.log('Service worker registered.');
				}).catch(function () {
					console.log('Service worker failed to register.');
				});
			} else {
				console.log('Service worker caching not supported.');
			}
		</script>
	</head>
	<body>
		<video id="vid"></video>
		<div id="canvas" touch-action="none"></div>
		<div id="toolbar">
			<div>
				<input type="file" accept="video/*" id="vid-upload" />
				<button id="upload-btn" title="Open video">
					<svg role="img">
						<title>Open video</title>
						<use xlink:href="images/icons/open.svg#icon" href="images/icons/open.svg#icon"></use>
					</svg>
				</button>
			</div>
			<div>
				&nbsp;
				<button id="rect-btn" title="Rectangle tool (R)">
					<svg role="img">
						<title>Rectangle</title>
						<use xlink:href="images/icons/rect.svg#icon" href="images/icons/rect.svg#icon"></use>
					</svg>
				</button>
				<button id="ellipse-btn" title="Oval tool (E or O)">
					<svg role="img">
						<title>Oval</title>
						<use xlink:href="images/icons/circle.svg#icon" href="images/icons/circle.svg#icon"></use>
					</svg>
				</button>
				<button id="clear-btn" title="Clear all (C or Esc)">
					<svg role="img">
						<title>Clear all</title>
						<use xlink:href="images/icons/clear.svg#icon" href="images/icons/clear.svg#icon"></use>
					</svg>
				</button>
			</div>
			<div>
				<button id="rew-btn" title="Hold to rewind (J or &larr;)">
					<svg role="img">
						<title>Rewind</title>
						<use xlink:href="images/icons/rewind.svg#icon" href="images/icons/rewind.svg#icon"></use>
					</svg>
				</button>
				<button id="play-pause-btn" title="Play/Pause (K or Space)">
					<svg role="img" id="play-icon">
						<title>Play</title>
						<use xlink:href="images/icons/play.svg#icon" href="images/icons/play.svg#icon"></use>
					</svg>
					<svg role="img" id="pause-icon" style="display: none;">
						<title>Pause</title>
						<use xlink:href="images/icons/pause.svg#icon" href="images/icons/pause.svg#icon"></use>
					</svg>
				</button>
				<button id="fwd-btn" title="Hold to fast forward (L or &rarr;)">
					<svg role="img">
						<title>Fast forward</title>
						<use xlink:href="images/icons/fast_forward.svg#icon" href="images/icons/fast_forward.svg#icon"></use>
					</svg>
				</button>
			</div>
			<div>
				<button id="info-btn" title="About">
					<svg role="img">
						<title>About</title>
						<use xlink:href="images/icons/info.svg#icon" href="images/icons/info.svg#icon"></use>
					</svg>
				</button><!--
				--><button id="hide-toolbar-btn" title="Hide toolbar (T to show/hide)">
					<svg role="img" style="transform: rotateZ(180deg);">
						<title>Hide toolbar</title>
						<use xlink:href="images/icons/caret_down.svg#icon" href="images/icons/caret_down.svg#icon"></use>
					</svg>
				</button>
			</div>
		</div>
		<section id="info-sheet" class="hidden">
			<p>
				Open a video from your computer to start.  Click and drag to draw a shape on the video.  Select the &times; button to clear everything drawn.  Press <kbd>T</kbd> to toggle the toolbar.  Hover over toolbar buttons to see other keyboard shortcuts.
			</p>
			<p>
				Developed by <a href="https://zmyaro.com" target="_blank">Zachary Yaro</a>.
			</p>
			<p>
				If you like this app, please consider <a href="https://ko-fi.com/zmyaro" target="_blank">buying me a cuppa</a>.
			</p>
		</section>
	</body>
</html>
